!function(e){"use strict";e.ToggleMenuHover=function(t,i){this.ToggleMenu=t,e.extend(!0,this.settings={},this.ToggleMenu.settings,e.ToggleMenuHover.defaults,i),this.elements=this.settings.elements,delete this.settings.elements,this.currentPosition={x:0,y:0},this.previousPosition={x:0,y:0},this.events={},this.prepareOptions()&&this.load()},e.ToggleMenuHover.defaults={elements:{menu:void 0,items:void 0,itemsLink:void 0},classes:{active:"is-active"},disableItemsClick:!1,interval:100,timeout:0,onLoad:void 0,afterEventsHandler:void 0,onComplete:void 0,onOver:void 0,onOut:void 0},e.ToggleMenuHover.prototype={prepareOptions:function(){return void 0===this.elements.menu?(this.ToggleMenu.setLog("error",'Missing element "elements.menu" in options.'),!1):(void 0===this.elements.items&&(this.elements.items=this.ToggleMenu.getItemsParent(this.elements.menu.find("li"))),0!==this.elements.items.length&&(!this.settings.disableItemsClick||(void 0===this.elements.itemsLink&&(this.elements.itemsLink=this.elements.items.children("a")),0!==this.elements.itemsLink.length)||(this.ToggleMenu.setLog("error",'Missing element "elements.itemsLink" in options.'),!1)))},load:function(){void 0!==this.settings.onLoad&&this.settings.onLoad.call({ToggleMenuHover:this}),this.eventsHandler(),void 0!==this.settings.onComplete&&this.settings.onComplete.call({ToggleMenuHover:this,elements:this.elements})},eventsHandler:function(){var t=this;t.elements.items.on(t.events.items="focus.togglemenu blur.togglemenu mouseenter.togglemenu mouseleave.togglemenu",function(i){var s={event:e.extend({},i),item:this,$item:e(this)};s.item.hoverTimeout&&(s.item.hoverTimeout=clearTimeout(s.item.hoverTimeout)),"mouseenter"===s.event.type||"focus"===s.event.type?(t.setTrackPosition("previous",s.event),s.$item.on("mousemove.togglemenu",function(){t.setTrackPosition("current",s.event)}),!0!==s.item.hoverState&&(s.item.hoverTimeout=setTimeout(function(){t.comparePosition(s)},t.settings.interval))):(s.$item.off("mousemove.togglemenu"),!0===s.item.hoverState&&(s.item.hoverTimeout=setTimeout(function(){return s.item.hoverTimeout=clearTimeout(s.item.hoverTimeout),s.item.hoverState=!1,t.onOut.call(e.extend({ToggleMenuHover:t},s))},t.settings.timeout)))}),t.settings.disableItemsClick&&t.elements.itemsLink.on(t.events.itemsLink="click.togglemenu",function(e){e.preventDefault()}),void 0!==t.settings.afterEventsHandler&&t.settings.afterEventsHandler.call({ToggleMenuHover:t,elements:t.elements,events:t.events})},setTrackPosition:function(e,t){e="previous"===e?"previousPosition":"currentPosition",this[e].x=t.pageX,this[e].y=t.pageY},comparePosition:function(t){var i=this;if(t.item.hoverTimeout=clearTimeout(t.item.hoverTimeout),Math.abs(i.previousPosition.x-i.currentPosition.x)+Math.abs(i.previousPosition.y-i.currentPosition.y)<7)return t.$item.off("mousemove.togglemenu"),t.item.hoverState=!0,i.onOver.call(e.extend({ToggleMenuHover:i},t));i.previousPosition.x=i.currentPosition.x,i.previousPosition.y=i.currentPosition.y,t.item.hoverTimeout=setTimeout(function(){i.comparePosition(t)},i.settings.interval)},onOver:function(){this.$item.addClass(this.ToggleMenuHover.settings.classes.active),void 0!==this.ToggleMenuHover.settings.onOver&&this.ToggleMenuHover.settings.onOver.call(this)},onOut:function(){this.$item.removeClass(this.ToggleMenuHover.settings.classes.active),void 0!==this.ToggleMenuHover.settings.onOut&&this.ToggleMenuHover.settings.onOut.call(this)},unload:function(){var t=this;e.each(t.events,function(e,i){t.elements[e].off(i)})}}}(jQuery);
!function(s){"use strict";s.ToggleMenuHover=function(e,t){return this.toggleMenu=e,s.extend(s.ToggleMenuHover.prototype,s.ToggleMenu.prototype),s.extend(!0,this.settings={},this.toggleMenu.settings,s.ToggleMenuHover.defaults,t),this.elements=this.settings.elements,delete this.settings.elements,this.position={previous:{x:0,y:0},current:{x:0,y:0}},this.events={},this.prepareUserOptions()&&this.load(),this},s.ToggleMenuHover.defaults={elements:{menu:void 0,items:void 0,itemLink:"> a"},disableItemsClick:!1,interval:100,timeout:200,beforeLoad:void 0,afterEventsHandler:void 0,onComplete:void 0,onOver:void 0,onOut:void 0},s.ToggleMenuHover.prototype={prepareUserOptions:function(){return void 0===this.getElements().menu?(this.setLog("Missing elements.menu parameter","error"),!1):(void 0===this.getElements().items&&(this.elements.items=this.getItemsParent(this.getElements().menu.find("li"))),0!==this.getElements().items.length)},load:function(){return void 0!==this.settings.beforeLoad&&this.settings.beforeLoad.call({toggleMenuHover:this}),this.eventsHandler(),void 0!==this.settings.onComplete&&this.settings.onComplete.call({toggleMenuHover:this,elements:this.getElements()}),this},unload:function(){var o=this;return s.each(o.events,function(e,t){void 0!==o.getElements()[e]&&o.getElements()[e].off(t)}),o},eventsHandler:function(){var o=this;return o.getElements().items.on(o.events.items="focusin.togglemenuHover focusout.togglemenuHover blur.togglemenuHover mouseenter.togglemenuHover mouseleave.togglemenuHover",function(e){var t={storage:this,element:s(e.currentTarget)};t.storage.hoverTimeout&&(t.storage.hoverTimeout=clearTimeout(t.storage.hoverTimeout)),"mouseenter"===e.type||"focusin"===e.type?(o.setPosition("previous",{x:e.pageX,y:e.pageY}),t.element.on("mousemove.togglemenuHover",function(){o.setPosition("current",{x:e.pageX,y:e.pageY})}),!0!==t.storage.hoverState&&(t.storage.hoverTimeout=setTimeout(function(){o.comparePosition(t)},o.settings.interval))):(t.element.off("mousemove.togglemenuHover"),!0===t.storage.hoverState&&(t.storage.hoverTimeout=setTimeout(function(){return t.storage.hoverTimeout=clearTimeout(t.storage.hoverTimeout),t.storage.hoverState=!1,o.onOut(t)},o.settings.timeout)))}),o.settings.disableItemsClick&&o.getElements().items.on(o.events.itemsLink="click.togglemenuHover",o.getElements().itemLink,function(e){e.preventDefault()}),void 0!==o.settings.afterEventsHandler&&o.settings.afterEventsHandler.call({toggleMenuHover:o,elements:o.getElements(),events:o.events}),o},setPosition:function(e,t){return this.position[e].x=t.x,this.position[e].y=t.y,this},getPosition:function(e,t){var o=this.position[e];return void 0!==t&&(o=o[t]),o},comparePosition:function(e){var t=this;return e.storage.hoverTimeout=clearTimeout(e.storage.hoverTimeout),Math.abs(t.getPosition("previous","x")-t.getPosition("current","x"))+Math.abs(t.getPosition("previous","y")-t.getPosition("current","y"))<7?(e.element.off("mousemove.togglemenuHover"),e.storage.hoverState=!0,t.onOver(e)):(t.setPosition("previous",{x:t.getPosition("current","x"),y:t.getPosition("current","y")}),e.storage.hoverTimeout=setTimeout(function(){t.comparePosition(e)},t.settings.interval),t)},onOver:function(e){return e.element.addClass(this.settings.classes.active),void 0!==this.settings.onOver&&this.settings.onOver.call({toggleMenuHover:this,item:e}),this},onOut:function(e){return e.element.removeClass(this.settings.classes.active),void 0!==this.settings.onOut&&this.settings.onOut.call({toggleMenuHover:this,item:e}),this}}}(jQuery);
!function(o){"use strict";o.ToggleMenuHover=function(e,t){return this.toggleMenu=e,o.extend(!0,this.settings={},this.toggleMenu.settings,o.ToggleMenuHover.defaults,t),this.elements=this.settings.elements,delete this.settings.elements,this.currentPosition={x:0,y:0},this.previousPosition={x:0,y:0},this.events={},!!this.prepareOptions()&&this.load()},o.ToggleMenuHover.defaults={elements:{menu:void 0,items:void 0,itemLink:"> a"},classes:{active:"is-active"},disableItemsClick:!1,interval:100,timeout:200,onLoad:void 0,afterEventsHandler:void 0,onComplete:void 0,onOver:void 0,onOut:void 0},o.ToggleMenuHover.prototype={prepareOptions:function(){return void 0===this.elements.menu?(this.toggleMenu.setLog("error","Missing elements.menu parameter"),!1):(void 0===this.elements.items&&(this.elements.items=this.toggleMenu.getItemsParent(this.elements.menu.find("li"))),0!==this.elements.items.length)},load:function(){return void 0!==this.settings.onLoad&&this.settings.onLoad.call({toggleMenuHover:this}),this.eventsHandler(),void 0!==this.settings.onComplete&&this.settings.onComplete.call({toggleMenuHover:this,elements:this.elements}),this},eventsHandler:function(){var i=this;return i.elements.items.on(i.events.items="focusin.togglemenu focusout.togglemenu blur.togglemenu mouseenter.togglemenu mouseleave.togglemenu",function(e){var t={event:o.extend({},e),item:this,$item:o(e.currentTarget)};t.item.hoverTimeout&&(t.item.hoverTimeout=clearTimeout(t.item.hoverTimeout)),"mouseenter"===t.event.type||"focusin"===t.event.type?(i.setTrackPosition("previous",t.event),t.$item.on("mousemove.togglemenu",function(){i.setTrackPosition("current",t.event)}),!0!==t.item.hoverState&&(t.item.hoverTimeout=setTimeout(function(){i.comparePosition(t)},i.settings.interval))):(t.$item.off("mousemove.togglemenu"),!0===t.item.hoverState&&(t.item.hoverTimeout=setTimeout(function(){return t.item.hoverTimeout=clearTimeout(t.item.hoverTimeout),t.item.hoverState=!1,i.onOut.call(o.extend({toggleMenuHover:i},t))},i.settings.timeout)))}),i.settings.disableItemsClick&&i.elements.items.on(i.events.itemsLink="click.togglemenu",i.elements.itemLink,function(e){e.preventDefault()}),void 0!==i.settings.afterEventsHandler&&i.settings.afterEventsHandler.call({toggleMenuHover:i,elements:i.elements,events:i.events}),i},setTrackPosition:function(e,t){return this[e="previous"===e?"previousPosition":"currentPosition"].x=t.pageX,this[e].y=t.pageY,this},comparePosition:function(e){var t=this;return e.item.hoverTimeout=clearTimeout(e.item.hoverTimeout),Math.abs(t.previousPosition.x-t.currentPosition.x)+Math.abs(t.previousPosition.y-t.currentPosition.y)<7?(e.$item.off("mousemove.togglemenu"),e.item.hoverState=!0,t.onOver.call(o.extend({toggleMenuHover:t},e))):(t.previousPosition.x=t.currentPosition.x,t.previousPosition.y=t.currentPosition.y,e.item.hoverTimeout=setTimeout(function(){t.comparePosition(e)},t.settings.interval),t)},onOver:function(){return this.$item.addClass(this.toggleMenuHover.settings.classes.active),void 0!==this.toggleMenuHover.settings.onOver&&this.toggleMenuHover.settings.onOver.call(this),this},onOut:function(){return this.$item.removeClass(this.toggleMenuHover.settings.classes.active),void 0!==this.toggleMenuHover.settings.onOut&&this.toggleMenuHover.settings.onOut.call(this),this},unload:function(){var i=this;return o.each(i.events,function(e,t){i.elements[e].off(t)}),i}}}(jQuery);
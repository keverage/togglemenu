!function(n){"use strict";n.ToggleMenuFixed=function(e,t){return this.toggleMenu=e,n.extend(!0,this.settings={},this.toggleMenu.settings,n.ToggleMenuFixed.defaults,t),this.elements=this.settings.elements,delete this.settings.elements,this.events={},this.isOpen=!1,!!this.prepareOptions()&&this.load()},n.ToggleMenuFixed.defaults={elements:{menu:void 0,items:void 0,itemLink:function(e){return e.children("a")},toggle:void 0},toggle:!0,classes:{open:"is-{prefix}Open",active:"is-active"},onLoad:void 0,afterEventsHandler:void 0,afterItemHandler:void 0,onComplete:void 0,onToggle:void 0,onToggleSubmenu:void 0},n.ToggleMenuFixed.prototype={prepareOptions:function(){var s=this;return n.each(s.settings.classes,function(e,t){s.settings.classes[e]=t.replace(/{prefix}/,s.settings.classes.prefix)}),void 0===s.elements.toggle&&(s.elements.toggle=n("."+this.settings.classes.prefix+"-toggle"),0===s.elements.toggle.length)?(s.toggleMenu.setLog("error","Missing elements.toggle parameter"),!1):void 0===s.elements.menu?(s.toggleMenu.setLog("error","Missing element.menu parameter"),!1):(void 0===s.elements.items?s.elements.items=s.toggleMenu.getItemsParent(s.elements.menu.find("li")):"function"==typeof s.elements.items&&(s.elements.items=s.elements.items(content)),!0)},load:function(){return void 0!==this.settings.onLoad&&this.settings.onLoad.call({toggleMenuFixed:this}),this.eventsHandler(),this.itemsHandler(),void 0!==this.settings.onComplete&&this.settings.onComplete.call({toggleMenuFixed:this,elements:this.elements}),this},eventsHandler:function(){var e=this;return e.settings.toggle?e.elements.toggle.on(e.events.toggle="click.togglemenu.toggle",function(){e.toggle()}):e.elements.menu.on(e.events.menu="mouseenter.togglemenu.toggle mouseleave.togglemenu.toggle",function(){e.toggle()}),void 0!==e.settings.afterEventsHandler&&e.settings.afterEventsHandler.call({toggleMenuFixed:e,elements:e.elements,events:e.events}),e},itemsHandler:function(){var s=this;s.elements.items.length&&s.elements.items.each(function(e,t){t=n(t),s.elements.itemLink(t).on("click.togglemenu.itemLink",function(e){e.preventDefault(),s.isOpen||s.toggle(),s.toggleSubmenu(t)}),void 0!==s.settings.afterItemHandler&&s.settings.afterItemHandler.call({toggleMenuFixed:s,elements:s.elements,item:t})})},toggle:function(){this.toggleMenu.elements.body.toggleClass(this.settings.classes.open),this.isOpen=this.toggleMenu.elements.body.hasClass(this.settings.classes.open),this.isOpen||this.closeSubmenus(),void 0!==this.settings.onToggle&&this.settings.onToggle.call({toggleMenuFixed:this,body:this.toggleMenu.elements.body,isOpen:this.isOpen})},toggleSubmenu:function(e){this.closeSubmenus(e),e.toggleClass(this.settings.classes.active),void 0!==this.settings.onToggleSubmenu&&this.settings.onToggleSubmenu.call({toggleMenuFixed:this,item:e})},closeSubmenus:function(e){var t=void 0!==e?e.siblings("."+this.settings.classes.active):this.elements.items,s=t.find("."+this.settings.classes.active);if(t.length&&t.removeClass(this.settings.classes.active),s.length&&s.removeClass(this.settings.classes.active),void 0!==e){var n=e.find("."+this.settings.classes.active);n.length&&n.removeClass(this.settings.classes.active)}},unload:function(){var s=this;return s.isOpen&&s.toggle(),n.each(s.events,function(e,t){s.elements[e].off(t)}),s.elements.items.each(function(e,t){s.elements.itemLink(n(t)).off("click.togglemenu.itemLink")}),s}}}(jQuery);
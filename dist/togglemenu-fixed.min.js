!function(n){"use strict";n.ToggleMenuFixed=function(e,t){return this.toggleMenu=e,n.extend(n.ToggleMenuFixed.prototype,n.ToggleMenu.prototype),n.extend(!0,this.settings={},this.toggleMenu.settings,n.ToggleMenuFixed.defaults,t),this.elements=n.extend(!0,{body:n("body")},this.settings.elements),delete this.settings.elements,this.events={},this.isOpen=!1,this.prepareUserOptions()&&this.load(),this},n.ToggleMenuFixed.defaults={elements:{menu:void 0,items:void 0,itemLink:function(e){return e.children("a")},toggle:void 0},toggle:!0,beforeLoad:void 0,afterEventsHandler:void 0,afterItemHandler:void 0,onComplete:void 0,onToggle:void 0,onToggleSubmenu:void 0},n.ToggleMenuFixed.prototype={prepareUserOptions:function(){var e=this;return this.replacePrefixClass(),void 0===e.getElements().toggle&&(e.elements.toggle=n("."+this.settings.classes.prefix+"-toggle"),0===e.getElements().toggle.length)?(e.setLog("Missing elements.toggle parameter","error"),!1):void 0===e.getElements().menu?(e.setLog("Missing element.menu parameter","error"),!1):(void 0===e.getElements().items?e.elements.items=e.getItemsParent(e.getElements().menu.find("li")):"function"==typeof e.getElements().items&&(e.elements.items=e.getElements().items()),!0)},load:function(){return void 0!==this.settings.beforeLoad&&this.settings.beforeLoad.call({toggleMenuFixed:this}),this.eventsHandler(),this.itemsHandler(),void 0!==this.settings.onComplete&&this.settings.onComplete.call({toggleMenuFixed:this,elements:this.getElements()}),this},unload:function(){var s=this;return s.isOpen&&s.toggle(),n.each(s.events,function(e,t){void 0!==s.getElements()[e]&&s.getElements()[e].off(t)}),s.getElements().items.each(function(e,t){s.getElements().itemLink(n(t)).off("click.togglemenuFixed")}),s},eventsHandler:function(){var e=this;return e.settings.toggle?e.getElements().toggle.on(e.events.toggle="click.togglemenuFixed",{self:e},e.toggle):e.getElements().menu.on(e.events.menu="mouseenter.togglemenuFixed mouseleave.togglemenuFixed",{self:e},e.toggle),void 0!==e.settings.afterEventsHandler&&e.settings.afterEventsHandler.call({toggleMenuFixed:e,elements:e.getElements(),events:e.events}),e},itemsHandler:function(){var s=this;return s.getElements().items.length&&s.getElements().items.each(function(e,t){t=n(t),s.getElements().itemLink(t).on("click.togglemenuFixed",function(e){e.preventDefault(),s.isOpen||s.toggle(),s.toggleSubmenu(t)}),void 0!==s.settings.afterItemHandler&&s.settings.afterItemHandler.call({toggleMenuFixed:s,elements:s.getElements(),item:t})}),s},toggle:function(e){var t=void 0!==e&&void 0!==e.data&&void 0!==e.data.self?e.data.self:this;return t.getElements().body.toggleClass(t.settings.classes.open),t.isOpen=t.getElements().body.hasClass(t.settings.classes.open),t.isOpen||t.closeSubmenus(),void 0!==t.settings.onToggle&&t.settings.onToggle.call({toggleMenuFixed:t,isOpen:t.isOpen}),t},toggleSubmenu:function(e){return this.closeSubmenus(e),e.toggleClass(this.settings.classes.active),void 0!==this.settings.onToggleSubmenu&&this.settings.onToggleSubmenu.call({toggleMenuFixed:this,item:e}),this},closeSubmenus:function(e){var t=void 0!==e?e.siblings("."+this.settings.classes.active):this.getElements().items,s=t.find("."+this.settings.classes.active);if(t.length&&t.removeClass(this.settings.classes.active),s.length&&s.removeClass(this.settings.classes.active),void 0!==e){var n=e.find("."+this.settings.classes.active);n.length&&n.removeClass(this.settings.classes.active)}return this}}}(jQuery);
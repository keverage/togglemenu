!function(e){"use strict";e.ToggleMenuFixed=function(t,s){this.ToggleMenu=t,e.extend(!0,this.settings={},this.ToggleMenu.settings,e.ToggleMenuFixed.defaults,s),this.elements=this.settings.elements,delete this.settings.elements,this.events={},this.isOpen=!1,this.prepareOptions()&&this.load()},e.ToggleMenuFixed.defaults={elements:{menu:void 0,items:void 0,itemLink:function(e){return e.children("a")},toggle:void 0},toggle:!0,classes:{open:"is-$prefixOpen",active:"is-active"},onLoad:void 0,afterEventsHandler:void 0,afterItemHandler:void 0,onComplete:void 0,onToggle:void 0,onToggleSubmenu:void 0},e.ToggleMenuFixed.prototype={prepareOptions:function(){var t=this;return e.each(t.settings.classes,function(e,s){t.settings.classes[e]=s.replace(/\$prefix/,t.settings.classes.prefix)}),void 0===t.elements.toggle&&(t.elements.toggle=e("."+this.settings.classes.prefix+"-toggle"),0===t.elements.toggle.length)?(t.ToggleMenu.setLog("error",'Element "toggle" not found.'),!1):void 0===t.elements.menu?(t.ToggleMenu.setLog("error",'Missing element "elements.menu" in options.'),!1):(void 0===t.elements.items&&(t.elements.items=t.ToggleMenu.getItemsParent(t.elements.menu.find("li"))),!0)},load:function(){void 0!==this.settings.onLoad&&this.settings.onLoad.call({ToggleMenuFixed:this}),this.eventsHandler(),this.itemsHandler(),void 0!==this.settings.onComplete&&this.settings.onComplete.call({ToggleMenuFixed:this,elements:this.elements})},eventsHandler:function(){var e=this;e.settings.toggle?e.elements.toggle.on(e.events.toggle="click.togglemenu.toggle",function(){e.toggle()}):e.elements.menu.on(e.events.menu="mouseenter.togglemenu.toggle mouseleave.togglemenu.toggle",function(){e.toggle()}),void 0!==e.settings.afterEventsHandler&&e.settings.afterEventsHandler.call({ToggleMenuFixed:e,elements:e.elements,events:e.events})},itemsHandler:function(){var t=this;t.elements.items.length&&t.elements.items.each(function(){var s=e(this);t.elements.itemLink(s).on("click.togglemenu.itemLink",function(e){e.preventDefault(),t.isOpen||t.toggle(),t.toggleSubmenu(s)}),void 0!==t.settings.afterItemHandler&&t.settings.afterItemHandler.call({ToggleMenuFixed:t,elements:t.elements,item:s})})},toggle:function(){this.ToggleMenu.elements.body.toggleClass(this.settings.classes.open),this.isOpen=this.ToggleMenu.elements.body.hasClass(this.settings.classes.open),this.isOpen||this.closeSubmenus(),void 0!==this.settings.onToggle&&this.settings.onToggle.call({ToggleMenuFixed:this,body:this.ToggleMenu.elements.body,isOpen:this.isOpen})},toggleSubmenu:function(e){this.closeSubmenus(e),e.toggleClass(this.settings.classes.active),void 0!==this.settings.onToggleSubmenu&&this.settings.onToggleSubmenu.call({ToggleMenuFixed:this,item:e})},closeSubmenus:function(e){var t=void 0!==e?e.siblings("."+this.settings.classes.active):this.elements.items,s=t.find("."+this.settings.classes.active);if(t.length&&t.removeClass(this.settings.classes.active),s.length&&s.removeClass(this.settings.classes.active),void 0!==e){var n=e.find("."+this.settings.classes.active);n.length&&n.removeClass(this.settings.classes.active)}},unload:function(){var t=this;t.isOpen&&t.toggle(),e.each(t.events,function(e,s){t.elements[e].off(s)}),t.elements.items.each(function(){t.elements.itemLink(e(this)).off("click.togglemenu.itemLink")})}}}(jQuery);